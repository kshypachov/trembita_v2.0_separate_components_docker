; Main security server configuration file. Contains configuration entries
; for each component. These are default values, users should override these
; parameters in the local.ini file.

; =============================================================================
; Configuration parameters for Client and Server Proxy.
[proxy]

; Listen address of Client Proxy.
connector-host=0.0.0.0

; HTTP port number of Client Proxy.
client-http-port=80

; HTTPS port number of Client Proxy.
client-https-port=443

; Client Proxy HTTP client idle connection eviction period in seconds.
client-httpclient-idle-connection-eviction-period=1

; Client Proxy to Server Proxy connect timeout in milliseconds,
; a timeout of zero is interpreted as an infinite timeout.
client-httpclient-connect-timeout=30000

; Client Proxy to Server Proxy read timeout in milliseconds,
; a timeout of zero is interpreted as an infinite timeout.
client-httpclient-read-timeout=300000

; Client Proxy's HTTP client strategy to choose a target Server Proxy.
; Available values: 'fastest-connected', 'round-robin'.
client-httpclient-target-selection-strategy=round-robin

; Client Proxy's HTTP client socket buffer size in bytes.
client-httpclient-socket-buffer-size=16384

; Client Proxy's HTTP connector socket buffer size in bytes.
client-connector-socket-buffer-size=16384

; ClientProxy Jetty thread pool maximum size.
client-jetty-thread-pool-max-size=45

; Server Proxy's HTTP client socket buffer size in bytes.
server-httpclient-socket-buffer-size=16384

; Server Proxy's HTTP connector socket buffer size in bytes.
server-connector-socket-buffer-size=16384

; ServerProxy Jetty thread pool maximum size.
server-jetty-thread-pool-max-size=45

; Port number for Server Proxy as seen from Client Proxy.
server-port=5500

; Listen address of Server Proxy.
server-listen-address=0.0.0.0

; (HTTPS) port number of Server Proxy.
server-listen-port=5500

; Server Proxy's connection accept rate limit, values 0 and below disable accept
; rate throttling.
server-connection-accept-rate-limit=0

; Server Proxy's connection accept rate limit period in seconds.
server-connection-accept-rate-limit-period=1

; Server Proxy HTTP client idle connection eviction period in seconds.
server-httpclient-idle-connection-eviction-period=1

; Server Proxy to service provider connect timeout in milliseconds,
; a timeout of zero is interpreted as an infinite timeout.
server-httpclient-connect-timeout=30000

; Server Proxy to service read timeout in milliseconds,
; a timeout of zero is interpreted as an infinite timeout.
server-httpclient-read-timeout=10000

; Lifetime of the Server Proxy TLS server OCSP stapling cache in seconds.
server-stapling-ocsp-cache-lifetime=300

; Time in milliseconds for excluding target servers from round-robin rotation
; when network connection to them times out.
round-robin-quarantine-time=60000

; Directory where cached OCSP responses are saved.
ocsp-cache-path=/var/cache/uxp

; Connect timeout of the Certificate Hash Based Ocsp Responder client in
; milliseconds, a timeout of zero is interpreted as an infinite timeout.
ocsp-responder-client-connect-timeout=20000

; Read timeout of the Certificate Hash Based Ocsp Responder client in
; milliseconds, a timeout of zero is interpreted as an infinite timeout.
ocsp-responder-client-read-timeout=30000

; Number of seconds that a certificate has to be valid for in the future when
; validating cached info before use to ensure expiring OCSPs don't cause issues.
ocsp-usage-safety-offset=2

; Connect timeout of the WSDL downloader in milliseconds,
; a timeout of zero is interpreted as an infinite timeout.
wsdl-download-connect-timeout=10000

; Read timeout of the WSDL downloader in milliseconds,
; a timeout of zero is interpreted as an infinite timeout
wsdl-download-read-timeout=5000

; Connect timeout of the OpenAPI downloader in milliseconds,
; a timeout of zero is interpreted as an infinite timeout.
openapi-download-connect-timeout=10000

; Read timeout of the OpenAPI downloader in milliseconds,
; a timeout of zero is interpreted as an infinite timeout.
openapi-download-read-timeout=5000

; Properties file of database configuration parameters.
database-properties=/etc/uxp/db.properties

; Whether software token should create batch signatures whenever possible.
software-token-batch-signatures=false

; Whether batch signatures are created in any suitable context.
batch-signatures-enabled=true

; Whether regular request and response signatures are stored in the message log.
log-signatures=true

; Whether metaservice request and response signatures are stored in the
; message log.
log-metaservice-signatures=true

; Whether monitoring request and response signatures are stored in the
; message log.
log-monitoring-signatures=true

; Maximum size in bytes of SOAP messages that are retained for logging
max-retained-soap-message-size-bytes=5242880

; Maximum size in bytes of SOAP attachments that are retained for logging
max-retained-soap-attachment-size-bytes=0

; Maximum size in bytes of REST payloads that are retained for logging
max-retained-rest-payload-size-bytes=5242880

; Comma-separated list of HTTP headers that will not be forwarded for
; REST API messages.
additional-forbidden-rest-http-headers=

; Server configuration cache reload interval in seconds.
serverconf-reload-interval-seconds=60

; Digest algorithm used to calculate SOAP message hashes.
; Ppossible values are: SHA-256, SHA-384, SHA-512.
digest-algorithm-id=SHA-512

; Digest algorithm used to calculate hashes for certificate registration request
; signatures. Possible values are: SHA-256, SHA-384, SHA-512.
cert-reg-signature-digest-algorithm-id=SHA-512

; Digest algorithm used to calculate hashes for certificate signing request
; signatures. Possible values are: SHA-256, SHA-384, SHA-512.
csr-signature-digest-algorithm-id=SHA-256

; Comma-separated list of TLS cipher suites that are allowed for connections
; from an information system to the Client Proxy and from the Server Proxy
; to a service (internal network).
internal-cipher-suites=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384,TLS_DHE_RSA_WITH_AES_128_GCM_SHA256,TLS_DHE_RSA_WITH_AES_128_CBC_SHA256,TLS_DHE_RSA_WITH_AES_256_CBC_SHA256,TLS_DHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_AES_128_GCM_SHA256,TLS_AES_256_GCM_SHA384

; Comma-separated list of TLS cipher suites that are allowed for connections
; from a Client Proxy to a Server Proxy.
transport-cipher-suites=TLS_DHE_RSA_WITH_AES_256_CBC_SHA256,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_AES_256_GCM_SHA384

; Whether signature's signing certificate must conform to the qualified
; certificate profile.
verify-signing-certificate-qualified=false

; Whether signature must have an embedded timestamp when proxy verifies
; signatures.
signature-timestamp-required=false

; Whether signature timestamp signer certificate chain should be verified
; during timestamp verification.
timestamp-verify-signer-chain=false

; Timestamper HTTP client idle connection eviction period in seconds.
timestamper-httpclient-idle-connection-eviction-period=1

; Timestamper HTTP client connect timeout in milliseconds,
; a timeout of zero is interpreted as an infinite timeout.
timestamper-httpclient-connect-timeout=30000

; Timestamper HTTP client read timeout in milliseconds,
; a timeout of zero is interpreted as an infinite timeout.
timestamper-httpclient-read-timeout=300000

; Directory containing PKCS#12 keys of the software token.
software-token-key-dir=/etc/uxp/signer/

[pkcs11]

; Maximum amount of seconds to wait for a PKCS#11 singing session to become
; available when borrowing one from a pool.
signing-session-pool-wait-time-seconds=10

; =============================================================================
; Configuration parameters for AntiDos.
; These parameters specify limits at which connections will be dropped.
[anti-dos]

; On/off switch.
enabled=true

; Maximum number of allowed parallel connections.
max-parallel-connections=5000

; Maximum allowed CPU load (0.0 ... 1.0).
; Set >= 1.0 to disable CPU load checking.
max-cpu-load=1.1

; Maximum allowed JVM heap usage (0.0 ... 1.0).
; Set >= 1.0 to disable heap usage checking.
max-heap-usage=1.1

; Minimum number of free file handles.
min-free-file-handles=100

; =============================================================================
; Configuration parameters for the operational monitoring buffer.
[op-monitor-buffer]

; Maximum size (records count) of the operational monitoring buffer. If the
; buffer size is less than 1, operational monitoring data is not stored and
; forwarded to the proxy monitoring agent.
size=20000

; Maximum number of operational data records in a message sent by the
; operational monitoring buffer to the proxy monitoring agent.
max-records-in-message=500

; Interval in seconds at which the operational monitoring buffer (re)tries to
; send records to the proxy monitoring agent. Normally, the buffer triggers the
; sending mechanism immediately when it receives a new record. In case of heavy
; load or sending failures the records are accumulating in the buffer and need
; periodical attention.
sending-interval-seconds=5

; HTTP client connect timeout, in milliseconds, for the operational monitoring
; buffer. The HTTP client is used for sending operational monitoring records
; from the operational monitoring buffer to the proxy monitoring agent.
httpclient-connect-timeout=30000

; HTTP client read timeout, in milliseconds, for the operational monitoring
; buffer. The HTTP client is used for sending operational monitoring records
; from the operational monitoring buffer to the proxy monitoring agent.
httpclient-read-timeout=60000

; =============================================================================
; Configuration parameters for monitoring services handler.
[monitoring-service]

; HTTP client connect timeout, in milliseconds, for the monitoring service. The
; HTTP client is used to forward monitoring data requests from the proxy to the
; proxy monitoring agent.
httpclient-connect-timeout=30000

; HTTP client read timeout, in milliseconds, for the monitoring service. The
; HTTP client is used to forward monitoring data requests from the proxy to the
; proxy monitoring agent.
httpclient-read-timeout=60000

; =============================================================================
; Configuration parameters for Proxy status check.
[proxy-status-check]

; Whether to stop listening for HTTP(S) connections from client applications
; in case the proxy status is down.
clientproxy-listening-switch-enabled=false

; Whether to stop listening for HTTPS connections from the service client's
; security server(s) in case the proxy status is down.
serverproxy-listening-switch-enabled=false

; Proxy status check interval in seconds (minimum value is 10).
interval-seconds=15